<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/assets/blog/homelab/thumbnail.jpg"/><link rel="preload" as="image" href="/assets/blog/gilianeverink.nl/thumbnail.png"/><link rel="stylesheet" href="/_next/static/css/777e41119fcc118c.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/b0fdefbf69d5ab00.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/71a2d74c0e985d7f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-dd3cb3144f6fe949.js"/><script src="/_next/static/chunks/fd9d1056-dfc0d8741092951e.js" async=""></script><script src="/_next/static/chunks/23-e8ed7a6d40410b96.js" async=""></script><script src="/_next/static/chunks/main-app-96f784de63e81cfa.js" async=""></script><script src="/_next/static/chunks/56-4ca225befcc1e384.js" async=""></script><script src="/_next/static/chunks/640-c43a5c3a291b9b6a.js" async=""></script><script src="/_next/static/chunks/app/layout-781cbbc6fca33f37.js" async=""></script><script src="/_next/static/chunks/app/projects/page-754dd26d820565dd.js" async=""></script><title>All projects | Sten ter Stal</title><meta name="description" content="Online resume and collection of projects"/><meta property="og:title" content="All projects | Sten ter Stal"/><meta property="og:description" content="Online resume and collection of projects"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="All projects | Sten ter Stal"/><meta name="twitter:description" content="Online resume and collection of projects"/><meta name="theme-color" content="#000"/><link rel="icon" type="image/svg+xml" href="/favicon/icon.png"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body><nav><div class="container"><ul><li class=""><a class="title" href="/">Sten ter Stal</a></li><li class="active"><a href="/projects">Projects</a></li></ul><a class="repo" href="https://github.com/stenterstal/stenterstal.github.io"><img alt="github-repo-link" loading="lazy" width="22" height="22" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/github.fd5c0afd.svg"/></a></div></nav><main><div class="main-container"><section class="projects"><h1>All projects</h1><ul class="tags"><li class="">home lab<!-- --> (<!-- -->1<!-- -->)</li><li class="">docker<!-- --> (<!-- -->1<!-- -->)</li><li class="">webdev<!-- --> (<!-- -->1<!-- -->)</li><li class="">react<!-- --> (<!-- -->1<!-- -->)</li></ul><div class="projects-container"><div class="project"><div class="thumbnail-bg"><img src="/assets/blog/homelab/thumbnail.jpg" alt="project thumbnail" class="thumbnail"/></div><div class="text"><h3>Home server self-hosting</h3><p>Short overview of the why and how of my server rack and the applications hosted on it, giving back control of data and privacy while also providing a good learning experience.</p></div></div><div class="project"><div class="thumbnail-bg"><img src="/assets/blog/gilianeverink.nl/thumbnail.png" alt="project thumbnail" class="thumbnail"/></div><div class="text"><h3>Gilianeverink.nl</h3><p>Minimalist personal website build for a friend using React, Typescript and NextJS. Hosted as a static SPA on Github Pages</p></div></div></div></section></div><footer><ul><li class="active"><a href="/projects">Projects</a></li><li class=""><a href="/cheatsheets">Cheatsheets</a></li></ul></footer></main><script src="/_next/static/chunks/webpack-dd3cb3144f6fe949.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/777e41119fcc118c.css\",\"style\"]\n2:HL[\"/_next/static/css/b0fdefbf69d5ab00.css\",\"style\"]\n3:HL[\"/_next/static/css/71a2d74c0e985d7f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[5751,[],\"\"]\n7:I[9275,[],\"\"]\n8:I[1343,[],\"\"]\n9:I[1425,[\"56\",\"static/chunks/56-4ca225befcc1e384.js\",\"640\",\"static/chunks/640-c43a5c3a291b9b6a.js\",\"185\",\"static/chunks/app/layout-781cbbc6fca33f37.js\"],\"default\"]\na:I[685,[\"56\",\"static/chunks/56-4ca225befcc1e384.js\",\"640\",\"static/chunks/640-c43a5c3a291b9b6a.js\",\"185\",\"static/chunks/app/layout-781cbbc6fca33f37.js\"],\"default\"]\nc:I[6130,[],\"\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/777e41119fcc118c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"um20UetmN6D_q6fVM9Sid\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/projects\",\"initialTree\":[\"\",{\"children\":[\"projects\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"projects\",{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\"],null],null]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b0fdefbf69d5ab00.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/71a2d74c0e985d7f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/svg+xml\",\"href\":\"/favicon/icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}]]}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"$L9\",null,{}],[\"$\",\"main\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"main-container\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"$La\",null,{}]]}]]}]]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]]\n"])</script><script>self.__next_f.push([1,"e:I[2001,[\"895\",\"static/chunks/app/projects/page-754dd26d820565dd.js\"],\"default\"]\nf:T26f9,"])</script><script>self.__next_f.push([1,"\n![Picture of my server rack](/assets/blog/homelab/cover.jpg)\n*My server rack containing the firewall, switch and servers*\n\n## Why selfhosting?\nIn an era where more and more personal information is being stored in the cloud, and with cloud providers like Google and others actively profiting from that information, \nit’s important to try to keep as much of that personal data private and \"in-house\" (literally, in this case).\n\nBy storing that much personal data and using services (such as email) through these providers, you also give up control of your digital presence to these companies. \nWhat if a bot at Google decides that your online activity is undesirable and closes your Google account, including your Gmail? In an instant, \nyou could lose access to any accounts linked to that email and be left at the mercy of Google to recover your account.\n\nAside from addressing privacy concerns, self-hosting is also a fun way to learn more about how networks, app deployment, and internet security work—an added bonus in my view.\n\n## In the beginning\nWhen I first started my self-hosting journey, I only had a Raspberry Pi 4 with a couple of external HDDs attached to serve some media files. \nSoon, I outgrew the computational limitations of the Pi and decided to upgrade to a self-built system in a [Fractal Node 304](https://www.fractal-design.com/products/cases/node/node-304/black/), \nwhich is actually a great case for a home server if you don't want or don't have space for a rack. \nIt has space for six (!) HDDs in an ITX form factor, and I installed an Intel i3-10300T, which is powerful enough to handle media transcoding using its Intel UHD Graphics 630 chip, while having a max TDP (thermal design power) of just 35W.\n\nAt first, I mainly used it for serving media (movies and shows) to my various devices using [Jellyfin](https://jellyfin.org/). \nTo move away from online cloud storage from Google, I deployed an instance of [Nextcloud](https://nextcloud.com/) (which I'm now considering moving away from, as it’s too bloated), \nwhich also hosted my calendar and contacts book before I migrated that functionality to [BaïkalDAV](https://sabre.io/baikal/) (a lightweight CalDAV and CardDAV server).\n\n### Network expansion\nWhile doing all of this, I was still using my ISP’s default router, which had some features like port forwarding and a simple firewall, but lacked the advanced features I needed as the complexity of my network grew. \nSome things that were missing included VLAN support and more granular control over firewall rules.\n\nI settled on a [Protectli FW4B](https://eu.protectli.com/product/fw4b/) and installed [OPNsense](https://opnsense.org/) on it, which is an open source fork of pfSense.\nYou could probably get a cheaper box to run your firewall, but since this was my first network hardware expansion, I wanted to play it safe rather than opting for an unbranded, Chinese-manufactured box.\n\nBecause \"normal\" _dumb_ switches don't have VLAN support, I bought a [Cisco Series 350 managed switch](https://www.cisco.com/c/en/us/support/switches/350-series-managed-switches/series.html) to replace a TP-Link 8 port switch I had. \nWWhile having 24 ports and supporting all the advanced features I needed, it was still small enough to fit in my past \"network shelf\" (AKA Ikea Kallax), but it also had a 19-inch rack mount for proper rack installation.\n\nLeveraging the new firewall and switch I seperated my network in multiple VLAN's;\n- A DMZ for the externally exposed server using port-forward\n- An \"internal\" DMZ for the internal server\n- \"Main\" VLAN for trusted devices like my PC and phone\n- IOT VLAN with no internet access to stop devices from \"talking home\"\n\nBecause devices in the DMZ don’t have access to any other devices on the network, this adds an extra layer of security in case of a compromised machine. \nThe same rule is applied to the IoT VLAN, as these smart devices run on manufacturers' firmware, over which I have no control in terms of safety and potential backdoors.\n\n## Exposing services to the internet\nReplacing cloud services with local applications that are not accessible from the internet defeats the purpose of a Cloud. \nTherefore, the applications running in Docker containers on the external-facing server (in the DMZ) are exposed to the outside world via a reverse proxy, with additional security measures in place.\nI also have applications hosted on another internal server, but because these are not exposed to the internet they are not referenced in this post.\n\n![Flow of exposing services to the internet](/assets/blog/homelab/network_flow.png)\n\n#### Reverse proxy\nOne of the main challenges of exposing multiple applications in Docker containers to the internet is that you can only forward one port 80 (HTTP) and one port 443 (HTTPS) from your router or firewall. \nA possible workaround is to assign each container a different port (e.g., one on port 80 and another on port 8080), but this approach quickly becomes cumbersome.\nIn this case, you would need to access the non-default HTTP/HTTPS containers using a URL like _domain.com:8080_, but it becomes difficult to remember the port number for each application quickly.\n\nTo fix this problem, I use reverse proxy called [Traefik](https://doc.traefik.io/traefik/), which provides a single point of entry on specified port(s). In my case this is only port 443 (HTTPS) to ensure all incoming traffic is secure.\nWith Traefik, you can set labels to route specific subdomains to each container, for example the subdomain _cloud.domain.com_ routes to the Nextcloud container, and _media.domain.com_ routes to the Jellyfin instance.\n\nExposing containers only through a reverse proxy ensures better scalability and security. \nIf I have a new app to deploy and expose, I only need to spin up a new container with the appropriate [Traefik labels](https://doc.traefik.io/traefik/reference/dynamic-configuration/docker/), \nand everything is good to go—aside from adding the corresponding subdomain to my domain's DNS records. \nFrom a security perspective, this approach is a step up from exposing individual Docker containers, as the reverse proxy provides a single point of entry. \nFrom there, I can log all traffic, ban specific IPs attempting to brute-force anything (using fail2ban), and enable HTTPS with Cloudflare using automatic Let's Encrypt (ACME) certificates.\n\n#### Single Sign-On\nWhile some applications have their own authentication mechanisms, including features like 2FA, this is not always the case. \nStoring and remembering the passwords for each individual account can also become cumbersome, although modern password managers help alleviate this by offering features like auto-filling.\n\nTo simplify authentication, I use [Authentik](https://goauthentik.io/) to provide a single account for nearly all the applications I host. \nAuthentik allows me to add an authentication layer in front of my deployed apps using the same labeling system as Traefik, ensuring seamless integration.\n\nFor example, when I navigate to media.domain.com, Traefik first redirects me to Authentik on auth.domain.com to check if I'm logged in. \nIf I am, it redirects me back; if not, it prompts me for my credentials. Authentik supports Role-Based Access Control (RBAC), allowing me to restrict access to certain apps based on the user's assigned group. \nIt can also enforce 2FA during login, enhancing security compared to many default authentication mechanisms used by apps.\n\nIn addition to providing authentication in front of other apps, Authentik can serve as an Identity Provider (IdP) for apps, using so-called [_Providers_](https://docs.goauthentik.io/docs/providers). \nFor instance, Nextcloud, which has its own mobile app, can't rely on a standard redirect for authentication due to its mobile nature. \nHowever, Nextcloud can be configured to use an external LDAP or OAuth2 Identity Provider, which Authentik can provide.\n\n#### Firewall and Cloudflare\nThe last link in this entire chain is exposing the endpoints (in this case, port 443) to the World Wide Web, so they can be accessed from the internet. \nFactors to consider include security and continuity. I don’t want bad actors to be able to brute-force any services or launch a DDoS attack on my home network to take down my servers (and internet connection).\n\nTo mitigate this, I use [Cloudflare](https://www.cloudflare.com/)  as a proxy between my IP and the internet. \nInstead of requests going directly to my IP, they first go through Cloudflare, which hides my IP address and provides additional features like DDoS protection.\n\nThe firewall forwards all HTTPS traffic to the external server on the DMZ interface and is configured to drop connections coming from non-Cloudflare IPs. \nThis ensures that all incoming traffic is originating from the Cloudflare proxy.\n\nSince I’m located in The Netherlands and only access my server from other countries via VPN, \nI’ve geo-blocked all countries except for my own through Cloudflare. \nThe chance of a request coming from China or Russia being legitimate is virtually zero, which helps prevent much of the bot spam originating from those regions.\n\n## Concluding\nIn summary, self-hosting offers greater control over your data and privacy while allowing you to build and manage your own digital infrastructure. \nIt’s a practical way to move away from reliance on third-party services, and it provides the flexibility to customize your setup to fit your needs. \nWhether you're looking for better security, learning opportunities, or just want more control, self-hosting can be a solid choice.\n\n### Links\n- PC/NAS case: [Fractal Node 304](https://www.fractal-design.com/products/cases/node/node-304/black/)\n- OPNsense box: [Protectli FW4B](https://eu.protectli.com/product/fw4b/)\n- Firewall software: [OPNsense](https://opnsense.org/)\n- Reverse proxy: [Traefik](https://doc.traefik.io/traefik/)\n- Single Sign-On: [Authentik](https://goauthentik.io/)"])</script><script>self.__next_f.push([1,"10:T792,\n![Website preview](/assets/blog/gilianeverink.nl/preview.png)\n\nA friend of mine approached me with the question if I could make a simple minimalist website for him to replace his default namecheap parking page. \nHis domain is generally only used to host mail but some more technological knowledgeable people might try to browse to [gilianeverink.nl](https://gilianeverink.nl) when handing them your email adress.\n\nI made a simple one-page design with React+Typescript+Vite using `yarn create vite`.  Instead of CSS I like to use SCSS so I can nest styles and use variables.\nThe site features a single CSS media query for a correct display on mobile phones.\n\n### Deployment\nBecause hosting costs money and I like to be cheap the site is hosted on [github pages](https://pages.github.com/).\nThe only problem with this is that my own site (this site) is also hosted here and Namecheap DNS doesn't like it when you use a path in your CNAME record.\nThis is needed because my own site is already pointing to [stenterstal.github.io](https://stenterstal.github.io) and we have to point the site to [stenterstal.github.io/gilianeverink.nl/](https://stenterstal.github.io/gilianeverink.nl/).\n\nTo solve this there are basically 2 options. Make a Github account for Gilian so we can point the Namecheap CNAME record to `gilianeverink.github.io` or make a Cloudflare account (Cloudflare does enable you to use a path in your CNAME record)\n\nI went with making him a Cloudflare account instead of the Github account route. Using Cloudflare gives a couple nice benefits like automatic HTTPS rewrites, caching and DDOS protection. All while being free.\nWith the site still being hosted on my own Github account and repo I can still easily push new updates of the site without Gilian needing me to give access to a repo on his account.\n\n### Links\n- [Gilianeverink.nl](https://gilianeverink.nl)\n- [Git repo](https://github.com/stenterstal/gilianeverink.nl)6:[\"$\",\"section\",null,{\"className\":\"projects\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"All projects\"}],"])</script><script>self.__next_f.push([1,"[\"$\",\"$Le\",null,{\"projects\":[{\"published\":true,\"title\":\"Home server self-hosting\",\"excerpt\":\"Short overview of the why and how of my server rack and the applications hosted on it, giving back control of data and privacy while also providing a good learning experience.\",\"thumbnail\":\"/assets/blog/homelab/thumbnail.jpg\",\"date\":\"25-10-2024\",\"ogImage\":{\"url\":\"/assets/blog/homelab/thumbnail.jpg\"},\"tags\":[\"home lab\",\"docker\"],\"slug\":\"homelab\",\"content\":\"$f\"},{\"published\":true,\"title\":\"Gilianeverink.nl\",\"excerpt\":\"Minimalist personal website build for a friend using React, Typescript and NextJS. Hosted as a static SPA on Github Pages\",\"thumbnail\":\"/assets/blog/gilianeverink.nl/thumbnail.png\",\"date\":\"05-08-2024\",\"ogImage\":{\"url\":\"/assets/blog/gilianeverink.nl/thumbnail.png\"},\"tags\":[\"webdev\",\"react\"],\"slug\":\"gilianeverink\",\"content\":\"$10\"}],\"tags\":[{\"home lab\":1},{\"docker\":1},{\"webdev\":1},{\"react\":1}]}]]}]\nb:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"All projects | Sten ter Stal\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Online resume and collection of projects\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"All projects | Sten ter Stal\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"Online resume and collection of projects\"}],[\"$\",\"meta\",\"6\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:title\",\"content\":\"All projects | Sten ter Stal\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:description\",\"content\":\"Online resume and collection of projects\"}]]\n5:null\n"])</script></body></html>